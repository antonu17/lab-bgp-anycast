#!/bin/bash

IPV4_TARGETS=(
    # loopback addresses
    10.1.255.1 10.1.255.2 10.1.255.3
    10.1.254.1 10.1.254.2 10.1.254.3

    10.2.255.1 10.2.255.2 10.2.255.3
    10.2.254.1 10.2.254.2 10.2.254.3

    10.101.254.1
    10.102.254.1 10.102.254.2 10.102.254.3
    10.103.254.1

    # anycast addresses
    111.11.1.1 111.11.2.2 111.11.3.3
    222.22.1.1 222.22.2.2 222.22.3.3
    1.1.1.1 2.2.2.2

    # links
    10.1.1.1 10.1.1.2    10.2.1.1 10.2.1.2
    10.1.2.1 10.1.2.2    10.2.2.1 10.2.2.2
    10.1.3.1 10.1.3.2    10.2.3.1 10.2.3.2
    10.1.4.1 10.1.4.2    10.2.4.1 10.2.4.2
    10.1.5.1 10.1.5.2    10.2.5.1 10.2.5.2
    10.1.6.1 10.1.6.2    10.2.6.1 10.2.6.2
    10.1.7.1 10.1.7.2    10.2.7.1 10.2.7.2
    10.1.8.1 10.1.8.2    10.2.8.1 10.2.8.2
    10.1.9.1 10.1.9.2    10.2.9.1 10.2.9.2

    10.101.1.1 10.101.1.2
    10.102.1.1 10.102.1.2
    10.102.2.1 10.102.1.2
    10.102.3.1 10.102.1.2
    10.102.4.1 10.102.1.2
    10.102.5.1 10.102.1.2
    10.102.6.1 10.102.1.2
    10.102.7.1 10.102.1.2
    10.103.1.1 10.103.1.2

    192.168.101.1 192.168.101.2
    192.168.102.1 192.168.102.2
    192.168.103.1 192.168.103.2
)

print() {
    [ -n "$VERBOSE" ] && echo $1 || echo -n $1
}

do_ping() {
    [ -n "$VERBOSE" ] && TARGET="$HOSTNAME <---> $1 "
    ping -c 1 -W 0.1 $1 >/dev/null 2>&1 && print "${TARGET}." || >&2 print "${TARGET}x"
}

if [ "$1" == "-v" ]; then
    VERBOSE="1"
fi

for IP in "${IPV4_TARGETS[@]}"; do
    do_ping $IP
done
